<!doctype html>
<html class="no-js" lang="en" style="">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOJEIRA â€“ CULTURAL HABITAT</title>
    <link rel="stylesheet" href="../pt/assets/css/foundation.css">
    <link rel="stylesheet" href="../pt/assets/css/stylesheet.css">
    <link rel="stylesheet" href="https://use.typekit.net/rrz6ojb.css">
    <link rel="icon" type="image/svg+xml" href="../pt/assets/img/favicon.svg">
    <link rel="alternate icon" href="../pt/assets/img/favicon.ico">
    <script src="https://code.jquery.com/jquery-2.2.4.js"></script> 
    <script src="../pt/assets/js/general.js"></script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-QHJK4WGDWG"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-QHJK4WGDWG');
	</script>
</head>
   

<body id="entry" onmousemove="cursorElement(event)" style="cursor:initial; overflow: scroll;">
 

    
<div id="logotypeBlock">   
	<div class="grid-container full">
		<div class="">
				<h1>Sauna</h1>
				 <a href="http://192.168.1.95/relay/0?turn=toggle" target="_blank">
					<img class="" src="/images/sauna-turn-on.png" width="300px" style="cursor: pointer;"/>
				</a>
				<label class="toggle">
					<input type="checkbox">
					<span class="slider round"></span>
				  </label>
				  <p id="ison-value"></p>
				<!-- h1>Lights</h1>
				 <a href="http://192.168.1.95/relay/0?turn=toggle" target="_blank">
					<img class="" src="/images/sauna-turn-on.png" width="300px" /-->
				</a>
				<p>
			</div>
		</div>
    </div>
</div>
    
<script>
	const toggleSwitch = document.querySelector('input[type="checkbox"]');
	const isonValue = document.getElementById('ison-value');
	const url = 'http://192.168.1.95/relay/0';

	function updateIsonValue(ison) {
	  isonValue.textContent = `ISON: ${ison}`;
	}

	function fetchIson() {
	  fetch(url)
		.then(response => response.json())
		.then(data => {
		  const ison = data.ison;
		  updateIsonValue(ison);
		  toggleSwitch.checked = ison;
		})
		.catch(error => {
		  console.error(error);
		});
	}

	toggleSwitch.addEventListener('change', function() {
	  const ison = this.checked;
	  fetch(url, {
		method: 'POST',
		headers: {
		  'Content-Type': 'application/json'
		},
		body: JSON.stringify({ ison })
	  })
	  .then(response => response.json())
	  .then(data => {
		const newIson = data.ison;
		updateIsonValue(newIson);
	  })
	  .catch(error => {
		console.error(error);
	  });
	});

	fetchIson();
  </script>


</body>
</html>
